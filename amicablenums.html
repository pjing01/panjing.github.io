<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Amicable Numbers</title>
	<style>
		.box {
			padding: 8px 12px;
		}
		
		.submitbox {
			padding-left: 250px;
		}
	
	
	</style>
	<script language="javascript">
		
		function isFactor(x, y) {
			if ((x % y) == 0) {
				return true;
			}
			return false;
		}	
		
		function showArray(x) {
			var text = "[ " + x.toString() + " ]";
			return  text;
		}
		
		function addArray(x) {
			var sum = 0;
			for (i=0;i<x.length;i++) {
				sum += x[i];	
			}
			return sum;
		}
		
		function getFactors(x) {
			var factors = [];
			for (i=1;i<x;i++) {
				if (isFactor(x, i)) {
					factors.push(i);
				}
			}
			return factors;
		}
		
		function validate(x, y) {	
			if (x == "" || isNaN(x) || x < 1 || y == "" || isNaN(y) || y < 1) {
				return false;
			} else {
				return true;
			}
		}
		
		 
		
		function displayText() {
			
//			var test1 = isFactor(12, 3);
//			if (test1) {console.log("isFactor(12,3): the test passed");}
//			else {console.log("isFactor(12,3): the test failed");}
//			
//			var test2 = showArray([1, 2, 3]);
//			if ("1 2 3") {console.log("showArray([1, 2, 3]): the test passed");}
//			else {console.log("showArray([1, 2, 3]): the test failed");}
//			
//			var test3 = addArray([1, 2, 3]);
//			if (6) {console.log("addArray([1, 2, 3]): the test passed");}
//			else {console.log("addArray([1, 2, 3]): the test failed");}
//			
//			var test4 = getFactors(12);
//			if ([1,2,3,4,6,12]) {console.log("getFactors(12): the test passed");}
//			else {console.log("getFactors(12): the test failed");}
			
			var x = document.getElementById("firstnum").value;
			var y = document.getElementById("secondnum").value;
			var div = document.getElementById("valid");
			if( validate(x,y)){
				x_factors = getFactors(x);
				y_factors = getFactors(y);
				
				xf_sum = addArray(x_factors);
				yf_sum = addArray(y_factors);

				if (xf_sum == y && yf_sum == x){
					xf_text = showArray(x_factors);
					yf_text = showArray(y_factors);
					
					display_text = "The numbers " + x + " and " + y + " are amicable, because the  factors of " + x + " are " + xf_text + " and add up to "+ xf_sum + ", while the factors of " +  y + " are " + yf_text + " and add up to " + yf_sum;
					
					div.innerHTML = display_text;
				} else {
					div.innerHTML = "The numbers " + x + " and " + y + " are not amicable";
				}
			} else {
				alert("Please input positive numbers");
			}
		}
			
	</script>
</head>

<body>
	<h1>Amicable Numbers</h1>
	<p>Input two numbers to see if they're amicable!</p>
	<form name="numinput" method="post">
		<div class="box" data-errormsg="">
			<label for="firstnum">First Number:</label>
			<input type="text" id="firstnum" name="firstnum"><br>
		</div>			
		<div class="box" data-errormsg="">
			<label for="secondnum">Second Number:</label>
			<input type="text" id="secondnum" name="secondnum"><br>
		</div>
		<div class="submitbox">
			<button type="button" onclick="displayText()">Submit</button>
		</div>
	</form>
	<div>
		<p id="valid"></p> 
	</div>
	<hr>
	
</body>
</html>
